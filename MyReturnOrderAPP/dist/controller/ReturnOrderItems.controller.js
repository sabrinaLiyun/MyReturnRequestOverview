sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageBox","./utilities","sap/ui/core/routing/History","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(e,t,r,i,n,a){"use strict";return e.extend("SAPUI5MyReturnOrder.MyReturnOrderAPP.controller.ReturnOrderItems",{onInit:function(){this.oRouter=sap.ui.core.UIComponent.getRouterFor(this);this.oRouter.getTarget("TargetReturnOrderItems").attachDisplay(jQuery.proxy(this.handleRouteMatched,this))},handleRouteMatched:function(e){var t=e.getParameters().data;this.fnFilterTable(t.OrderNo);var r=new sap.ui.model.json.JSONModel;var i={};i.OrderNo=t.OrderNo;i.SalesOrg=t.SalesOrg;i.CustomerNo=t.CustomerNumber;i.CustName=t.CustomerName;i.DC=t.Channel;i.Division=t.Division;var n=t.CreationDate.split("-");var a=n[0];var o=n[1];var s=n[2];var u=a+"/"+o+"/"+s;i.CreationDate=u;var l;if(t.ResponseDate==="A"){i.ResponseDate=" "}else{var g=t.ResponseDate.split("-");var d=g[0];var f=g[1];var v=g[2];l=d+"/"+f+"/"+v;i.ResponseDate=l}i.Status=t.Status;r.setDefaultBindingMode("TwoWay");r.setData(i);this.getView().setModel(r,"OrderResource")},fnFilterTable:function(e){var t=[];if(e!==""){t.push(new n("CustomerReturn",a.EQ,e))}var r=this.byId("idItemTable");var i=r.getBinding("items");i.filter(t)},_onFioriListReportTableUpdateFinished:function(e){var t=e.getSource();var r=t.getAggregation("headerToolbar");if(r&&r.getAggregation("content")[1]){var i=r.getAggregation("content")[1];if(t.getBinding("items")&&t.getBinding("items").isLengthFinal()){i.setText("("+t.getBinding("items").getLength()+")")}else{i.setText("(1)")}}},formatValudationSatus:function(e){var t;if(e==="Rejected"){t="sap-icon://status-error"}else if(e==="Waiting for approval"||e==="Partially Approved"){t="sap-icon://status-critical"}else if(e==="Approved"){t="sap-icon://status-completed"}return t},formatAvailableToObjectState:function(e){var t;if(e==="Approved"){t="Success"}else if(e==="Waiting for approval"){t="Warning"}else if(e==="Rejected"){t="Error"}else if(e==="Partially Approved"){t="Warning"}return t},_onPageNavButtonPress:function(e){var r=e.getSource().getBindingContext();return new Promise(function(e){this.doNavigate("RouteReturnOrders",r,e,"")}.bind(this)).catch(function(e){if(e!==undefined){t.error(e.message)}})},doNavigate:function(e,t,r,i){var n=t?t.getPath():null;var a=t?t.getModel():null;var o;if(n!==null&&n!==""){if(n.substring(0,1)==="/"){n=n.substring(1)}o=n.split("(")[0]}var s;var u=this.sMasterContext?this.sMasterContext:n;if(o!==null){s=i||this.getOwnerComponent().getNavigationPropertyForNavigationWithContext(o,e)}if(s!==null&&s!==undefined){if(s===""){this.oRouter.navTo(e,{context:n,masterContext:u},false)}else{a.createBindingContext(s,t,null,function(t){if(t){n=t.getPath();if(n.substring(0,1)==="/"){n=n.substring(1)}}else{n="undefined"}if(n==="undefined"){this.oRouter.navTo(e)}else{this.oRouter.navTo(e,{context:n,masterContext:u},false)}}.bind(this))}}else{this.oRouter.navTo(e)}if(typeof r==="function"){r()}}})},true);