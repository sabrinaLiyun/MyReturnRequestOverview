sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageBox","./utilities","sap/ui/core/routing/History","sap/ui/core/UIComponent","sap/m/MessageToast","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(e,t,r,n,i,a,o,s){"use strict";return e.extend("SAPUI5MyReturnOrder.MyReturnOrderAPP.controller.ReturnOrders",{handleRouteMatched:function(e){var t="App1";var r={};if(e.mParameters.data.context){this.sContext=e.mParameters.data.context}else{if(this.getOwnerComponent().getComponentData()){var n=function(e){if(Object.keys(e).length!==0){for(var t in e){if(t!=="sourcePrototype"&&t.includes("Set")){return t+"("+e[t][0]+")"}}}};this.sContext=n(this.getOwnerComponent().getComponentData().startupParameters)}}var i;if(this.sContext){i={path:"/"+this.sContext,parameters:r};this.getView().bindObject(i)}this.onSearch()},_onFioriListReportTableItemPress:function(e){var t=e.getParameter("listItem").getBindingContext().getObject();var r=t.CreationDate.getFullYear();var n=t.CreationDate.getMonth()+1;var a=t.CreationDate.getUTCDate();var o=r+"-"+n+"-"+a;var s;if(t.ResponseDate===null){s="A"}else{var u=t.ResponseDate.getFullYear();var g=t.ResponseDate.getMonth()+1;var l=t.ResponseDate.getUTCDate();s=u+"-"+g+"-"+l}var v=i.getRouterFor(this);v.navTo("RouteReturnOrderItems",{OrderNo:t.CustomerReturn,SalesOrg:t.SalesOrganization,Channel:t.DistributionChannel,Division:t.OrganizationDivision,CustomerNumber:t.SoldToParty,CustomerName:t.CustomerName,CreationDate:o,ResponseDate:s,Status:t.ApprovalStatusDesc})},doNavigate:function(e,t,r,n){var i=t?t.getPath():null;var a=t?t.getModel():null;var o;if(i!==null&&i!==""){if(i.substring(0,1)==="/"){i=i.substring(1)}o=i.split("(")[0]}var s;var u=this.sMasterContext?this.sMasterContext:i;if(o!==null){s=n||this.getOwnerComponent().getNavigationPropertyForNavigationWithContext(o,e)}if(s!==null&&s!==undefined){if(s===""){this.oRouter.navTo(e,{context:i,masterContext:u},false)}else{a.createBindingContext(s,t,null,function(t){if(t){i=t.getPath();if(i.substring(0,1)==="/"){i=i.substring(1)}}else{i="undefined"}if(i==="undefined"){this.oRouter.navTo(e)}else{this.oRouter.navTo(e,{context:i,masterContext:u},false)}}.bind(this))}}else{this.oRouter.navTo(e)}if(typeof r==="function"){r()}},_onFioriListReportTableUpdateFinished:function(e){var t=e.getSource();var r=t.getAggregation("headerToolbar");if(r&&r.getAggregation("content")[1]){var n=r.getAggregation("content")[1];if(t.getBinding("items")&&t.getBinding("items").isLengthFinal()){n.setText("("+t.getBinding("items").getLength()+")")}else{n.setText("(1)")}}},_onFioriListReportActionButtonPress:function(e){var r=e.getSource().getBindingContext();return new Promise(function(e){this.doNavigate("RouteCreateReturnOrder",r,e,"")}.bind(this)).catch(function(e){if(e!==undefined){t.error(e.message)}})},onInit:function(){this.oRouter=sap.ui.core.UIComponent.getRouterFor(this);this.oRouter.getTarget("TargetReturnOrders").attachDisplay(jQuery.proxy(this.handleRouteMatched,this));this.oFilterBar=null;this.oFilterBar=this.getView().byId("ListReportFilterBar")},onExit:function(){var e=[{controlId:"Fiori_ListReport_ListReport_0-content-Fiori_ListReport_Table-1",groups:["items"]}];for(var t=0;t<e.length;t++){var r=this.getView().byId(e[t].controlId);if(r){for(var n=0;n<e[t].groups.length;n++){var i=e[t].groups[n];var a=r.getBindingInfo(i);if(a){var o=a.template;o.destroy()}}}}},onSearch:function(e){var t;var r=[];var n=this.byId("comboApprovalSta").getSelectedKeys();for(t=0;t<=n.length;t++){var i=n[t];if(i){r.push(new o("OverialApprovalSta",s.Contains,i))}}var a=this.byId("datePCreateDatep")._getInputValue();if(a){var u=a.slice(0,4);var g=a.slice(4,6);var l=a.slice(6,8);var v=u+"-"+g+"-"+l;r.push(new o("CreationDate",s.EQ,v))}var h=this.byId("datePResponseDate")._getInputValue();if(h){u=h.slice(0,4);g=h.slice(4,6);l=h.slice(6,8);v=u+"-"+g+"-"+l;r.push(new o("ResponseDate",s.EQ,v))}var p=this.byId("TabCustomerReturn");var c=p.getBinding("items");c.filter(r)},onBasecSearch:function(e){var t=[];var r=e.getParameter("query");if(r){t.push(new o("CustomerReturn",s.Contains,r))}var n=this.byId("TabCustomerReturn");var i=n.getBinding("items");i.filter(t)}})},true);