sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageBox","./utilities","sap/ui/core/routing/History","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(e,t,i,r,n,o){"use strict";return e.extend("SAPUI5MyReturnOrder.MyReturnOrderAPP.controller.ReturnOrderItems",{onInit:function(){this.oRouter=sap.ui.core.UIComponent.getRouterFor(this);this.oRouter.getTarget("TargetReturnOrderItems").attachDisplay(jQuery.proxy(this.handleRouteMatched,this))},handleRouteMatched:function(e){var t=e.getParameters().data;this.fnFilterTable(t.OrderNo);var i=new sap.ui.model.json.JSONModel;var r={};let n=`/CustomerREturn('${t.OrderNo}')`;var o=this.getView().getModel().getProperty(n);r.OrderNo=t.OrderNo;r.SalesOrg=o.SalesOrganization;r.CustomerNo=o.SoldToParty;r.CustName=o.CustomerName;r.DC=o.DistributionChannel;r.Division=o.OrganizationDivision;r.CreationDate=o.CreationDate;r.ResponseDate=o.ResponseDate;r.Status=o.ApprovalStatusDesc;i.setDefaultBindingMode("TwoWay");i.setData(r);this.getView().setModel(i,"OrderResource")},fnFilterTable:function(e){var t=[];if(e!==""){t.push(new n("CustomerReturn",o.EQ,e))}var i=this.byId("idItemTable");var r=i.getBinding("items");r.filter(t)},_onFioriListReportTableUpdateFinished:function(e){var t=e.getSource();var i=t.getAggregation("headerToolbar");if(i&&i.getAggregation("content")[1]){var r=i.getAggregation("content")[1];if(t.getBinding("items")&&t.getBinding("items").isLengthFinal()){r.setText("("+t.getBinding("items").getLength()+")")}else{r.setText("(1)")}}},formatValudationSatus:function(e){var t;if(e==="Rejected"){t="sap-icon://status-error"}else if(e==="Waiting for approval"||e==="Partially Approved"){t="sap-icon://status-critical"}else if(e==="Approved"){t="sap-icon://status-completed"}return t},formatAvailableToObjectState:function(e){var t;if(e==="Approved"){t="Success"}else if(e==="Waiting for approval"){t="Warning"}else if(e==="Rejected"){t="Error"}else if(e==="Partially Approved"){t="Warning"}return t},_onPageNavButtonPress:function(e){var i=e.getSource().getBindingContext();return new Promise(function(e){this.doNavigate("RouteReturnOrders",i,e,"")}.bind(this)).catch(function(e){if(e!==undefined){t.error(e.message)}})},doNavigate:function(e,t,i,r){var n=t?t.getPath():null;var o=t?t.getModel():null;var a;if(n!==null&&n!==""){if(n.substring(0,1)==="/"){n=n.substring(1)}a=n.split("(")[0]}var s;var u=this.sMasterContext?this.sMasterContext:n;if(a!==null){s=r||this.getOwnerComponent().getNavigationPropertyForNavigationWithContext(a,e)}if(s!==null&&s!==undefined){if(s===""){this.oRouter.navTo(e,{context:n,masterContext:u},false)}else{o.createBindingContext(s,t,null,function(t){if(t){n=t.getPath();if(n.substring(0,1)==="/"){n=n.substring(1)}}else{n="undefined"}if(n==="undefined"){this.oRouter.navTo(e)}else{this.oRouter.navTo(e,{context:n,masterContext:u},false)}}.bind(this))}}else{this.oRouter.navTo(e)}if(typeof i==="function"){i()}}})},true);